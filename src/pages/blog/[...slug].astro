---
import { simpleStrapiClient } from '@/lib/strapi-simple';
import BlogLayout from '@/layouts/BlogLayout.astro';

export async function getStaticPaths() {
  // Get all blog posts from Strapi for static generation
  const posts = await simpleStrapiClient.getBlogPosts();
  
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

// Get the post data from props
const { post } = Astro.props;

if (!post) {
  return Astro.redirect('/404');
}
---

<BlogLayout post={post}>
  <Fragment set:html={post.body} />
</BlogLayout> 